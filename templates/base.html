{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LAManagement</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link rel="stylesheet" href="{% static 'css/cart.css' %}" />
  </head>

  <body style="background-color: #e4cdb2">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'js/main.js' %}"></script>

    {% block navbar %}
    <!-- Sidebar Desktop (Visible only on Desktop >= 1024px) -->

    <!-- Mobile Navbar (Hidden on Desktop >= 1024px) -->
    <div class="container sticky-top mt-2">
      <nav class="navbar navbar-dark navbar-custom py-2">
        <div class="container-fluid px-3">
          <a
            style="font-family: 'Playfair Display', serif"
            class="navbar-brand fw-bold me-auto"
            href="{% url 'product_list' %}"
          >
            <span class="brand-dot">LAM</span>anagement<span class="brand-dot"
              >.</span
            >
          </a>
          <div class="d-flex align-items-center">
            {% if user.is_authenticated %}
            <div class="d-none d-sm-flex align-items-center me-2">
              <a
                href="{% url 'user_panel' %}"
                class="nav-link text-light fw-bold me-3"
                style="font-size: 0.9rem"
              >
                <i class="bi bi-person-circle me-1"></i>{{ user.username }}
              </a>
              <form method="post" action="{% url 'logout' %}" class="d-inline">
                {% csrf_token %}
                <button
                  style="
                    color: #e67e22;
                    border: none;
                    background: transparent;
                    padding: 0.2rem 0.5rem;
                  "
                  type="submit"
                  title="Cerrar Sesión"
                >
                  <i
                    class="bi bi-box-arrow-right"
                    style="font-size: 1.4rem"
                  ></i>
                </button>
              </form>
            </div>
            {% endif %}

            <a
              href="{% url 'carrito:cart_detail' %}"
              class="nav-link text-light position-relative d-flex align-items-center"
              id="cart-icon-container"
            >
              <i class="bi bi-cart3"></i>
              <span
                id="cart-badge"
                class="position-absolute badge rounded-pill"
              >
                {{ cart|length|default:"0" }}
              </span>
            </a>

            <button
              class="navbar-toggler ms-2 border-0 shadow-none"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarNav"
              aria-controls="navbarNav"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span
                class="navbar-toggler-icon"
                style="width: 1.25em; height: 1.25em"
              ></span>
            </button>
          </div>

          <div class="collapse navbar-collapse mt-3" id="navbarNav">
            <div
              class="p-3 rounded-4"
              style="
                background: rgba(255, 255, 255, 0.05);
                border: 1px solid rgba(255, 255, 255, 0.1);
              "
            >
              <ul class="navbar-nav">
                <li class="nav-item mb-2">
                  <small
                    class="text-uppercase"
                    style="
                      color: rgba(255, 255, 255, 0.3);
                      font-size: 0.7rem;
                      letter-spacing: 0.1em;
                      padding-left: 0.5rem;
                    "
                    >Navegación</small
                  >
                </li>
                {% if user.is_superuser %}
                <li class="nav-item">
                  <a href="{% url 'dashboard_home' %}" class="nav-link">
                    <i class="bi bi-speedometer2 me-2"></i>Dashboard
                  </a>
                </li>
                <li class="nav-item">
                  <a href="{% url 'product_create' %}" class="nav-link">
                    <i class="bi bi-plus-circle me-2"></i>Nuevo Producto
                  </a>
                </li>
                {% endif %}

                <li class="nav-item">
                  <a href="{% url 'inventory_index' %}" class="nav-link">
                    <i class="bi bi-box-seam me-2"></i>Inventario
                  </a>
                </li>

                {% if user.is_authenticated %}
                <li class="nav-item">
                  <a href="{% url 'lista_pedidos' %}" class="nav-link">
                    <i class="bi bi-bag-check me-2"></i>Mis Pedidos
                  </a>
                </li>
                <li
                  class="nav-item d-flex d-sm-none mt-3 pt-3 border-top border-light border-opacity-10 align-items-center"
                >
                  <a
                    href="{% url 'user_panel' %}"
                    class="nav-link text-light fw-bold py-0"
                  >
                    <i class="bi bi-person-circle me-2"></i>{{ user.username }}
                  </a>
                  <form
                    method="post"
                    action="{% url 'logout' %}"
                    class="ms-auto"
                  >
                    {% csrf_token %}
                    <button
                      class="btn btn-sm btn-outline-danger border-0"
                      type="submit"
                    >
                      Salir
                    </button>
                  </form>
                </li>
                {% else %}
                <li class="nav-item mt-2">
                  <a
                    href="{% url 'login' %}"
                    class="btn btn-primary-custom w-100 py-2"
                    >Iniciar Sesión</a
                  >
                </li>
                {% endif %}
              </ul>
            </div>
          </div>
        </div>
      </nav>
    </div>
    {% endblock %}

    <main class="container content flex-grow-1 mt-4">
      {% if messages %}
      <div class="row justify-content-center">
        <div class="col-md-8">
          {% for message in messages %}
          <div
            class="alert alert-{{ message.tags }} alert-dismissible fade show"
            role="alert"
          >
            {{ message }}
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="alert"
              aria-label="Close"
            ></button>
          </div>
          {% endfor %}
        </div>
      </div>
      {% endif %} {% block content %}{% endblock %}
    </main>

    <footer
      class="footer mt-auto pt-5 pb-4"
      style="
        background-color: #3d241f;
        border-top: 5px solid var(--accent-orange);
      "
    >
      <div class="container text-md-start text-center">
        <div class="row">
          <!-- Brand Section -->
          <div class="col-md-4 mb-4 mb-md-0">
            <h4
              class="fw-bold mb-3"
              style="font-family: 'Playfair Display', serif; color: #e4ded0"
            >
              <span class="brand-dot">LAM</span>anagement<span class="brand-dot"
                >.</span
              >
            </h4>
            <p class="text-white-50 small pe-md-4">
              La plataforma definitiva para la gestión de piezas de lujo y moda
              con estilo. Elevamos tu experiencia de venta y compra a un nivel
              de exclusividad sin precedentes.
            </p>
            <div
              class="d-flex justify-content-center justify-content-md-start gap-3 mt-4"
            >
              <a href="#" class="social-link"
                ><i class="bi bi-instagram"></i
              ></a>
              <a href="#" class="social-link"><i class="bi bi-tiktok"></i></a>
              <a href="#" class="social-link"><i class="bi bi-facebook"></i></a>
              <a href="#" class="social-link"><i class="bi bi-whatsapp"></i></a>
            </div>
          </div>

          <!-- Quick Links -->
          <div class="col-md-4 mb-4 mb-md-0">
            <h5
              class="fw-bold mb-3"
              style="font-family: 'Playfair Display', serif; color: #e67e22"
            >
              Enlaces Rápidos
            </h5>
            <ul class="list-unstyled">
              <li class="mb-2">
                <a href="{% url 'product_list' %}" class="footer-link"
                  >Catálogo Exclusivo</a
                >
              </li>
              <li class="mb-2">
                <a href="{% url 'inventory_index' %}" class="footer-link"
                  >Gestión de Inventario</a
                >
              </li>
              <li class="mb-2">
                <a href="{% url 'dashboard_home' %}" class="footer-link"
                  >Panel de Control</a
                >
              </li>
              <li class="mb-2">
                <a href="{% url 'product_create' %}" class="footer-link"
                  >Publicar Nueva Pieza</a
                >
              </li>
            </ul>
          </div>

          <!-- Contact / Support -->
          <div class="col-md-4">
            <h5
              class="fw-bold mb-3"
              style="font-family: 'Playfair Display', serif; color: #e67e22"
            >
              Contacto y Soporte
            </h5>
            <ul class="list-unstyled text-white-50 small">
              <li class="mb-2">
                <i
                  class="bi bi-geo-alt-fill me-2"
                  style="color: var(--accent-orange)"
                ></i>
                Caracas, Venezuela
              </li>
              <li class="mb-2">
                <i
                  class="bi bi-envelope-fill me-2"
                  style="color: var(--accent-orange)"
                ></i>
                exclusive@lamanagement.com
              </li>
              <li class="mb-2">
                <i
                  class="bi bi-telephone-fill me-2"
                  style="color: var(--accent-orange)"
                ></i>
                +58 (412) 555-0123
              </li>
              <li class="mt-3">
                <small>Soporte disponible 24/7 para clientes Premium.</small>
              </li>
            </ul>
          </div>
        </div>

        <hr class="mt-5 mb-4 border-light opacity-10" />

        <div class="row align-items-center">
          <div class="col-md-6 text-center text-md-start">
            <span class="text-white-50 small"
              >&copy; 2025 L.A.Management<span class="brand-dot">.</span> Todos
              los derechos reservados.</span
            >
          </div>
          <div class="col-md-6 text-center text-md-end mt-2 mt-md-0">
            <a
              href="#"
              class="text-white-50 text-decoration-none small me-3 footer-mini-link"
              >Privacidad</a
            >
            <a
              href="#"
              class="text-white-50 text-decoration-none small footer-mini-link"
              >Términos</a
            >
          </div>
        </div>
      </div>
    </footer>
    <script src="{% static 'js/cart.js' %}"></script>
    {% block extra_js %}{% endblock %}
  </body>
</html>
