{% extends 'base.html' %} {% block navbar %}
<div class="container mt-4 text-center">
  <a
    style="
      font-family: 'Playfair Display', serif;
      color: var(--secondary-color-2);
      font-size: 2.5rem;
    "
    class="text-decoration-none fw-bold"
    href="{% url 'product_list' %}"
    >LAManagement</a
  >
</div>
{% endblock %} {% block content %}
<div class="auth-wrapper">
  <div
    class="auth-container {% if request.path == '/signup/' %}signup-active{% endif %}"
    id="authContainer"
  >
    <div class="auth-toggle-buttons mx-5 mt-4">
      <div class="auth-toggle-slider"></div>
      <button
        class="auth-toggle-btn {% if request.resolver_match.url_name == 'login' %}active{% endif %}"
        onclick="switchToLogin()"
      >
        Login
      </button>
      <button
        class="auth-toggle-btn {% if request.resolver_match.url_name == 'signup' %}active{% endif %}"
        onclick="switchToSignup()"
      >
        Sign Up
      </button>
    </div>

    <div class="auth-form-wrapper">
      <!-- Login Form -->
      <div class="auth-form-content" id="loginFormSection">
        <div class="auth-header mb-4">
          <h2 class="mb-2">Bienvenido</h2>
          <p class="text-muted small">Ingresa tus credenciales para acceder</p>
        </div>
        <form method="post" action="{% url 'login' %}">
          {% csrf_token %} {% for field in form %}
          <div class="mb-4">
            <label
              class="form-label fw-semibold mb-2"
              style="color: var(--secondary-color-2); font-size: 0.9rem"
              >{{ field.label }}</label
            >
            {{ field }} {% if field.errors %}
            <div class="text-danger small mt-1">{{ field.errors.0 }}</div>
            {% endif %}
          </div>
          {% endfor %}
          <div class="d-grid mt-5">
            <button type="submit" class="btn btn-primary-custom btn-lg py-3">
              Iniciar Sesión
            </button>
          </div>
        </form>
      </div>

      <!-- Signup Form (Placeholder / Logic to be handled) -->
      <div class="auth-form-content" id="signupFormSection">
        <div class="auth-header">
          <h2>Crea tu cuenta</h2>
          <p class="text-muted small">Únete a LAManagement</p>
        </div>
        <form method="post" action="{% url 'signup' %}">
          {% csrf_token %}
          <!-- We'll assume signup form fields are standard or handled by a separate view -->
          <!-- In standard Django, this might need more logic if served from same template -->
          {% if request.path == '/signup/' %} {% for field in form %}
          <div class="mb-3">
            <label
              class="form-label fw-semibold"
              style="color: var(--secondary-color-2)"
              >{{ field.label }}</label
            >
            {{ field }} {% if field.errors %}
            <div class="text-danger small mt-1">{{ field.errors.0 }}</div>
            {% endif %}
          </div>
          {% endfor %} {% else %}
          <p class="text-center text-muted py-4">
            Haz clic arriba para registrarte
          </p>
          {% endif %}
          <div class="d-grid mt-4">
            <button type="submit" class="btn btn-primary-custom btn-lg">
              Registrarse
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<script>
  function switchToLogin() {
    if (window.location.pathname !== '{% url "login" %}') {
      window.location.href = '{% url "login" %}';
    }
  }

  function switchToSignup() {
    if (window.location.pathname !== '{% url "signup" %}') {
      window.location.href = '{% url "signup" %}';
    }
  }

  // Smooth transition logic on load
  document.addEventListener("DOMContentLoaded", function () {
    const container = document.getElementById("authContainer");
    // If we just landed on a page, we could add entry animations here
  });
</script>
{% endblock %}
